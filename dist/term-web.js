/*!
 * term-web.js v1.1.10
 * Github: https://github.com/zhw2590582/term-web#readme
 * (c) 2017-2022 Harvey Zack
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Term=e()}(this,function(){"use strict";var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var o=t(e(function(t){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0})),P=t(e(function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0})),s=t(e(function(t){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0})),r=e(function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0}),c=t(r),a=e(function(n){function i(t,e){return n.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n.exports.default=n.exports,n.exports.__esModule=!0,i(t,e)}n.exports=i,n.exports.default=n.exports,n.exports.__esModule=!0});t(a);var u=t(e(function(t){t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0})),h=e(function(e){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0});t(h);var l=t(e(function(t){var n=h.default;t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?r(t):e},t.exports.default=t.exports,t.exports.__esModule=!0})),d=e(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0}),p=t(d);var n,f,g,m;n=".term-container{position:relative;user-select:none;overflow:hidden;border-radius:5px;box-shadow:0 20px 68px rgba(0,0,0,.55);scrollbar-color:#666 transparent!important;scrollbar-width:thin!important}.term-container ::-webkit-scrollbar{width:5px}.term-container ::-webkit-scrollbar-thumb{background-color:#666;border-radius:5px}.term-container ::-webkit-scrollbar-thumb:hover{background-color:#ccc}.term-container.is-dragging{opacity:.95}.term-container.is-fullscreen{position:fixed!important;z-index:9999!important;top:0!important;left:0!important;bottom:0!important;right:0!important;width:100%!important;height:100%!important}.term-container .term-canvas{position:absolute;z-index:1;top:0;left:0;bottom:0;right:0;width:100%;height:100%}.term-container .term-textarea{z-index:2}.term-container .term-copy,.term-container .term-textarea{position:absolute;width:20px;height:20px;opacity:0;pointer-events:none;resize:none}.term-container .term-copy{z-index:3}.term-container .term-header{position:absolute;z-index:4;width:100%;top:0;left:0;right:0}.term-container .term-header .term-recorder{position:absolute;right:10px;top:10px;height:18px;width:18px;border-radius:3px;cursor:pointer;border-style:solid;border-width:0;background:#f44336;transition:all .2s ease}@keyframes loop{0%{border-width:1px}50%{border-width:6px}to{border-width:1px}}.term-container .term-header .term-recorder.recording{background:#ff5722;border-color:rgba(255,254,254,.5);border-radius:50%;animation:loop 1s linear infinite}.term-container .term-header .term-recorder.creating{background:#009688;border-color:rgba(255,254,254,.5);border-radius:50%;animation:loop 1s linear infinite}.term-container .term-content{position:absolute;z-index:5;width:100%;right:0;left:0;overflow:auto}.term-container .term-content:hover{cursor:text}.term-container .term-footer{position:absolute;z-index:6;width:100%;bottom:0;left:0;right:0}.term-container .term-footer .term-resize{position:absolute;right:0;bottom:0;width:20px;height:20px;cursor:nwse-resize}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsZ0JBQ0UsaUJBQWtCLENBQ2xCLGdCQUFpQixDQUNqQixlQUFnQixDQUNoQixpQkFBa0IsQ0FDbEIsc0NBQTZDLENBQzdDLDBDQUE0QyxDQUM1Qyw4QkFDRixDQUNBLG9DQUNFLFNBQ0YsQ0FDQSwwQ0FDRSxxQkFBc0IsQ0FDdEIsaUJBQ0YsQ0FDQSxnREFDRSxxQkFDRixDQUNBLDRCQUNFLFdBQ0YsQ0FDQSw4QkFDRSx3QkFBMEIsQ0FDMUIsc0JBQXdCLENBQ3hCLGVBQWlCLENBQ2pCLGdCQUFrQixDQUNsQixrQkFBb0IsQ0FDcEIsaUJBQW1CLENBQ25CLG9CQUFzQixDQUN0QixxQkFDRixDQUNBLDZCQUNFLGlCQUFrQixDQUNsQixTQUFVLENBQ1YsS0FBTSxDQUNOLE1BQU8sQ0FDUCxRQUFTLENBQ1QsT0FBUSxDQUNSLFVBQVcsQ0FDWCxXQUNGLENBQ0EsK0JBRUUsU0FNRixDQUNBLDBEQVJFLGlCQUFrQixDQUVsQixVQUFXLENBQ1gsV0FBWSxDQUNaLFNBQVUsQ0FDVixtQkFBb0IsQ0FDcEIsV0FVRixDQVJBLDJCQUVFLFNBTUYsQ0FDQSw2QkFDRSxpQkFBa0IsQ0FDbEIsU0FBVSxDQUNWLFVBQVcsQ0FDWCxLQUFNLENBQ04sTUFBTyxDQUNQLE9BQ0YsQ0FDQSw0Q0FDRSxpQkFBa0IsQ0FDbEIsVUFBVyxDQUNYLFFBQVMsQ0FDVCxXQUFZLENBQ1osVUFBVyxDQUNYLGlCQUFrQixDQUNsQixjQUFlLENBQ2Ysa0JBQW1CLENBQ25CLGNBQWUsQ0FDZixrQkFBbUIsQ0FDbkIsdUJBQ0YsQ0FDQSxnQkFDRSxHQUNFLGdCQUNGLENBQ0EsSUFDRSxnQkFDRixDQUNBLEdBQ0UsZ0JBQ0YsQ0FDRixDQUNBLHNEQUNFLGtCQUFtQixDQUNuQixpQ0FBc0MsQ0FDdEMsaUJBQWtCLENBQ2xCLGlDQUNGLENBQ0EscURBQ0Usa0JBQW1CLENBQ25CLGlDQUFzQyxDQUN0QyxpQkFBa0IsQ0FDbEIsaUNBQ0YsQ0FDQSw4QkFDRSxpQkFBa0IsQ0FDbEIsU0FBVSxDQUNWLFVBQVcsQ0FDWCxPQUFRLENBQ1IsTUFBTyxDQUNQLGFBQ0YsQ0FDQSxvQ0FDRSxXQUNGLENBQ0EsNkJBQ0UsaUJBQWtCLENBQ2xCLFNBQVUsQ0FDVixVQUFXLENBQ1gsUUFBUyxDQUNULE1BQU8sQ0FDUCxPQUNGLENBQ0EsMENBQ0UsaUJBQWtCLENBQ2xCLE9BQVEsQ0FDUixRQUFTLENBQ1QsVUFBVyxDQUNYLFdBQVksQ0FDWixrQkFDRiIsImZpbGUiOiJpbmRleC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnRlcm0tY29udGFpbmVyIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBib3gtc2hhZG93OiByZ2JhKDAsIDAsIDAsIDAuNTUpIDBweCAyMHB4IDY4cHg7XG4gIHNjcm9sbGJhci1jb2xvcjogIzY2NiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xuICBzY3JvbGxiYXItd2lkdGg6IHRoaW4gIWltcG9ydGFudDtcbn1cbi50ZXJtLWNvbnRhaW5lciA6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgd2lkdGg6IDVweDtcbn1cbi50ZXJtLWNvbnRhaW5lciA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzY2NjtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xufVxuLnRlcm0tY29udGFpbmVyIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjO1xufVxuLnRlcm0tY29udGFpbmVyLmlzLWRyYWdnaW5nIHtcbiAgb3BhY2l0eTogMC45NTtcbn1cbi50ZXJtLWNvbnRhaW5lci5pcy1mdWxsc2NyZWVuIHtcbiAgcG9zaXRpb246IGZpeGVkICFpbXBvcnRhbnQ7XG4gIHotaW5kZXg6IDk5OTkgIWltcG9ydGFudDtcbiAgdG9wOiAwICFpbXBvcnRhbnQ7XG4gIGxlZnQ6IDAgIWltcG9ydGFudDtcbiAgYm90dG9tOiAwICFpbXBvcnRhbnQ7XG4gIHJpZ2h0OiAwICFpbXBvcnRhbnQ7XG4gIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gIGhlaWdodDogMTAwJSAhaW1wb3J0YW50O1xufVxuLnRlcm0tY29udGFpbmVyIC50ZXJtLWNhbnZhcyB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgei1pbmRleDogMTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICBib3R0b206IDA7XG4gIHJpZ2h0OiAwO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuLnRlcm0tY29udGFpbmVyIC50ZXJtLXRleHRhcmVhIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiAyO1xuICB3aWR0aDogMjBweDtcbiAgaGVpZ2h0OiAyMHB4O1xuICBvcGFjaXR5OiAwO1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgcmVzaXplOiBub25lO1xufVxuLnRlcm0tY29udGFpbmVyIC50ZXJtLWNvcHkge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHotaW5kZXg6IDM7XG4gIHdpZHRoOiAyMHB4O1xuICBoZWlnaHQ6IDIwcHg7XG4gIG9wYWNpdHk6IDA7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICByZXNpemU6IG5vbmU7XG59XG4udGVybS1jb250YWluZXIgLnRlcm0taGVhZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiA0O1xuICB3aWR0aDogMTAwJTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbn1cbi50ZXJtLWNvbnRhaW5lciAudGVybS1oZWFkZXIgLnRlcm0tcmVjb3JkZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAxMHB4O1xuICB0b3A6IDEwcHg7XG4gIGhlaWdodDogMThweDtcbiAgd2lkdGg6IDE4cHg7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItd2lkdGg6IDA7XG4gIGJhY2tncm91bmQ6ICNmNDQzMzY7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG59XG5Aa2V5ZnJhbWVzIGxvb3Age1xuICAwJSB7XG4gICAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIH1cbiAgNTAlIHtcbiAgICBib3JkZXItd2lkdGg6IDZweDtcbiAgfVxuICAxMDAlIHtcbiAgICBib3JkZXItd2lkdGg6IDFweDtcbiAgfVxufVxuLnRlcm0tY29udGFpbmVyIC50ZXJtLWhlYWRlciAudGVybS1yZWNvcmRlci5yZWNvcmRpbmcge1xuICBiYWNrZ3JvdW5kOiAjZmY1NzIyO1xuICBib3JkZXItY29sb3I6IHJnYmEoMjU1LCAyNTQsIDI1NCwgMC41KTtcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xuICBhbmltYXRpb246IGxvb3AgMXMgbGluZWFyIGluZmluaXRlO1xufVxuLnRlcm0tY29udGFpbmVyIC50ZXJtLWhlYWRlciAudGVybS1yZWNvcmRlci5jcmVhdGluZyB7XG4gIGJhY2tncm91bmQ6ICMwMDk2ODg7XG4gIGJvcmRlci1jb2xvcjogcmdiYSgyNTUsIDI1NCwgMjU0LCAwLjUpO1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGFuaW1hdGlvbjogbG9vcCAxcyBsaW5lYXIgaW5maW5pdGU7XG59XG4udGVybS1jb250YWluZXIgLnRlcm0tY29udGVudCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgei1pbmRleDogNTtcbiAgd2lkdGg6IDEwMCU7XG4gIHJpZ2h0OiAwO1xuICBsZWZ0OiAwO1xuICBvdmVyZmxvdzogYXV0bztcbn1cbi50ZXJtLWNvbnRhaW5lciAudGVybS1jb250ZW50OmhvdmVyIHtcbiAgY3Vyc29yOiB0ZXh0O1xufVxuLnRlcm0tY29udGFpbmVyIC50ZXJtLWZvb3RlciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgei1pbmRleDogNjtcbiAgd2lkdGg6IDEwMCU7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG59XG4udGVybS1jb250YWluZXIgLnRlcm0tZm9vdGVyIC50ZXJtLXJlc2l6ZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgd2lkdGg6IDIwcHg7XG4gIGhlaWdodDogMjBweDtcbiAgY3Vyc29yOiBud3NlLXJlc2l6ZTtcbn0iXX0= */",m=(f=void 0===f?{}:f).insertAt,n&&"undefined"!=typeof document&&(g=document.head||document.getElementsByTagName("head")[0],(f=document.createElement("style")).type="text/css","top"===m&&g.firstChild?g.insertBefore(f,g.firstChild):g.appendChild(f),f.styleSheet?f.styleSheet.cssText=n:f.appendChild(document.createTextNode(n)));var b=e(function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return t.constructor?t.constructor.name:null}function a(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:["option"];return u(t,e,n),h(t,e,n),function(o,s,c){var t=l(s),e=l(o);if("object"===t){if("object"!==e)throw new Error("[Type Error]: '".concat(c.join("."),"' require 'object' type, but got '").concat(e,"'"));Object.keys(s).forEach(function(t){var e=o[t],n=s[t],i=c.slice();i.push(t),u(e,n,i),h(e,n,i),a(e,n,i)})}if("array"===t){if("array"!==e)throw new Error("[Type Error]: '".concat(c.join("."),"' require 'array' type, but got '").concat(e,"'"));o.forEach(function(t,e){var n=o[e],i=s[e]||s[0],r=c.slice();r.push(e),u(n,i,r),h(n,i,r),a(n,i,r)})}}(t,e,n),t}function u(t,e,n){if("string"===l(e)){var i=l(t);if(!(-1<(e="?"===e[0]?e.slice(1)+"|undefined":e).indexOf("|")?e.split("|").map(function(t){return t.toLowerCase().trim()}).filter(Boolean).some(function(t){return i===t}):e.toLowerCase().trim()===i))throw new Error("[Type Error]: '".concat(n.join("."),"' require '").concat(e,"' type, but got '").concat(i,"'"))}}function h(t,e,n){if("function"===l(e)){e=e(t,l(t),n);if(!0!==e){t=l(e);throw"string"===t?new Error(e):"error"===t?e:new Error("[Validator Error]: The scheme for '".concat(n.join("."),"' validator require return true, but got '").concat(e,"'"))}}}var o,l;t.exports=(o=Object.prototype.toString,a.kindOf=l=function(t){if(void 0===t)return"undefined";if(null===t)return"null";var e,n=i(t);if("boolean"===n)return"boolean";if("string"===n)return"string";if("number"===n)return"number";if("symbol"===n)return"symbol";if("function"===n)return"GeneratorFunction"===r(t)?"generatorfunction":"function";if(e=t,Array.isArray?Array.isArray(e):e instanceof Array)return"array";if(t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return"buffer";if(function(t){try{if("number"==typeof t.length&&"function"==typeof t.callee)return 1}catch(t){if(-1!==t.message.indexOf("callee"))return 1}}(t))return"arguments";if(t instanceof Date||"function"==typeof t.toDateString&&"function"==typeof t.getDate&&"function"==typeof t.setDate)return"date";if(t instanceof Error||"string"==typeof t.message&&t.constructor&&"number"==typeof t.constructor.stackTraceLimit)return"error";if(t instanceof RegExp||"string"==typeof t.flags&&"boolean"==typeof t.ignoreCase&&"boolean"==typeof t.multiline&&"boolean"==typeof t.global)return"regexp";switch(r(t)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if("function"==typeof t.throw&&"function"==typeof t.return&&"function"==typeof t.next)return"generator";switch(n=o.call(t)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return n.slice(8,-1).toLowerCase().replace(/\s/g,"")},a)}),y=function(){function t(){P(this,t)}return s(t,[{key:"on",value:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this}},{key:"once",value:function(i,r,o){var s=this;function c(){s.off(i,c);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.apply(o,e)}return c._=r,this.on(i,c,o)}},{key:"emit",value:function(t){for(var e=((this.e||(this.e={}))[t]||[]).slice(),n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var o=0;o<e.length;o+=1)e[o].fn.apply(e[o].ctx,i);return this}},{key:"off",value:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,s=i.length;o<s;o+=1)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}}]),t}();var x=e(function(t){var e,n;e=window,n=function(){function p(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},f=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],g=f.length;function m(t){t=getComputedStyle(t);return t||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var b,y=!1;function x(t){if(y||(y=!0,(d=document.createElement("div")).style.width="200px",d.style.padding="1px 2px 3px 4px",d.style.borderStyle="solid",d.style.borderWidth="1px 2px 3px 4px",d.style.boxSizing="border-box",(l=document.body||document.documentElement).appendChild(d),h=m(d),b=200==Math.round(p(h.width)),x.isBoxSizeOuter=b,l.removeChild(d)),(t="string"==typeof t?document.querySelector(t):t)&&"object"==typeof t&&t.nodeType){var e=m(t);if("none"==e.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<g;e++)t[f[e]]=0;return t}();var n={};n.width=t.offsetWidth,n.height=t.offsetHeight;for(var i=n.isBorderBox="border-box"==e.boxSizing,r=0;r<g;r++){var o=f[r],s=e[o],s=parseFloat(s);n[o]=isNaN(s)?0:s}var c=n.paddingLeft+n.paddingRight,a=n.paddingTop+n.paddingBottom,u=n.marginLeft+n.marginRight,h=n.marginTop+n.marginBottom,l=n.borderLeftWidth+n.borderRightWidth,d=n.borderTopWidth+n.borderBottomWidth,t=i&&b,i=p(e.width);!1!==i&&(n.width=i+(t?0:c+l));i=p(e.height);return!1!==i&&(n.height=i+(t?0:a+d)),n.innerWidth=n.width-(c+l),n.innerHeight=n.height-(a+d),n.outerWidth=n.width+u,n.outerHeight=n.height+h,n}}return x},t.exports?t.exports=n():e.getSize=n()}),v=e(function(t){var e,n;e="undefined"!=typeof window?window:i,n=function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var n=this._events=this._events||{},t=n[t]=n[t]||[];return-1==t.indexOf(e)&&t.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{};return(n[t]=n[t]||{})[e]=!0,this}},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length){e=t.indexOf(e);return-1!=e&&t.splice(e,1),this}},e.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){n=n.slice(0),e=e||[];for(var i=this._onceEvents&&this._onceEvents[t],r=0;r<n.length;r++){var o=n[r];i&&i[o]&&(this.off(t,o),delete i[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t},t.exports?t.exports=n():e.EvEmitter=n()}),w=e(function(t){var e,n;e=window,n=function(i,t){function e(){}t=e.prototype=Object.create(t.prototype);t.bindStartEvent=function(t){this._bindStartEvent(t,!0)},t.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},t._bindStartEvent=function(t,e){var n=(e=void 0===e||e)?"addEventListener":"removeEventListener",e="mousedown";i.PointerEvent?e="pointerdown":"ontouchstart"in i&&(e="touchstart"),t[n](e,this)},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getTouch=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.identifier==this.pointerIdentifier)return n}},t.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},t.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},t.onpointerdown=function(t){this._pointerDown(t,t)},t._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},t.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var n={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return t._bindPostStartEvents=function(t){t&&((t=n[t.type]).forEach(function(t){i.addEventListener(t,this)},this),this._boundPointerEvents=t)},t._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(t){i.removeEventListener(t,this)},this),delete this._boundPointerEvents)},t.onmousemove=function(t){this._pointerMove(t,t)},t.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},t.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},t._pointerMove=function(t,e){this.pointerMove(t,e)},t.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},t.onmouseup=function(t){this._pointerUp(t,t)},t.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},t.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},t._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},t.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},t._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},t._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},t.pointerDone=function(){},t.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},t.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},t._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},t.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},e.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},e},t.exports?t.exports=n(e,v):e.Unipointer=n(e,e.EvEmitter)}),k=e(function(t){var e,n;e=window,n=function(o,t){function e(){}var n=e.prototype=Object.create(t.prototype);n.bindHandles=function(){this._bindHandles(!0)},n.unbindHandles=function(){this._bindHandles(!1)},n._bindHandles=function(t){for(var e=(t=void 0===t||t)?"addEventListener":"removeEventListener",n=t?this._touchActionValue:"",i=0;i<this.handles.length;i++){var r=this.handles[i];this._bindStartEvent(r,t),r[e]("click",this),o.PointerEvent&&(r.style.touchAction=n)}},n._touchActionValue="none",n.pointerDown=function(t,e){this.okayPointerDown(t)&&(this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))};var i={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},r={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return n.okayPointerDown=function(t){var e=i[t.target.nodeName],t=r[t.target.type],t=!e||t;return t||this._pointerReset(),t},n.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},n.pointerMove=function(t,e){var n=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,n]),this._dragMove(t,e,n)},n._dragPointerMove=function(t,e){var n={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this._dragStart(t,e),n},n.hasDragStarted=function(t){return 3<Math.abs(t.x)||3<Math.abs(t.y)},n.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},n._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},n._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},n.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},n._dragMove=function(t,e,n){this.isDragging&&this.dragMove(t,e,n)},n.dragMove=function(t,e,n){t.preventDefault(),this.emitEvent("dragMove",[t,e,n])},n._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},n.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},n.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},n._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},n.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},e.getPointerPoint=t.getPointerPoint,e},t.exports?t.exports=n(e,w):e.Unidragger=n(e,e.Unipointer)}),I=e(function(t){var e,n;e=window,n=function(r,s,t){function n(t,e){for(var n in e)t[n]=e[n];return t}var i=r.jQuery;function e(t,e){this.element="string"==typeof t?document.querySelector(t):t,i&&(this.$element=i(this.element)),this.options=n({},this.constructor.defaults),this.option(e),this._create()}t=e.prototype=Object.create(t.prototype);e.defaults={},t.option=function(t){n(this.options,t)};var o={relative:!0,absolute:!0,fixed:!0};function c(t,e,n){return n=n||"round",e?Math[n](t/e)*e:t}return t._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=n({},this.position);var t=getComputedStyle(this.element);o[t.position]||(this.element.style.position="relative"),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},t.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},t.dispatchEvent=function(t,e,n){var i=[e].concat(n);this.emitEvent(t,i),this.dispatchJQueryEvent(t,e,n)},t.dispatchJQueryEvent=function(t,e,n){var i=r.jQuery;i&&this.$element&&((e=i.Event(e)).type=t,this.$element.trigger(e,n))},t._getPosition=function(){var t=getComputedStyle(this.element),e=this._getPositionCoord(t.left,"width"),n=this._getPositionCoord(t.top,"height");this.position.x=isNaN(e)?0:e,this.position.y=isNaN(n)?0:n,this._addTransformPosition(t)},t._getPositionCoord=function(t,e){if(-1==t.indexOf("%"))return parseInt(t,10);var n=s(this.element.parentNode);return n?parseFloat(t)/100*n[e]:0},t._addTransformPosition=function(t){var e,n=t.transform;0===n.indexOf("matrix")&&(e=n.split(","),t=0===n.indexOf("matrix3d")?12:4,n=parseInt(e[t],10),t=parseInt(e[1+t],10),this.position.x+=n,this.position.y+=t)},t.onPointerDown=function(t,e){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",t,[e])},t.pointerDown=function(t,e){this.okayPointerDown(t)&&this.isEnabled?(this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",t,[e])):this._pointerReset()},t.dragStart=function(t,e){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",t,[e]),this.animate())},t.measureContainment=function(){var t,e,n,i,r,o=this.getContainer();o&&(t=s(this.element),e=s(o),n=this.element.getBoundingClientRect(),r=o.getBoundingClientRect(),i=e.borderLeftWidth+e.borderRightWidth,o=e.borderTopWidth+e.borderBottomWidth,r=this.relativeStartPosition={x:n.left-(r.left+e.borderLeftWidth),y:n.top-(r.top+e.borderTopWidth)},this.containSize={width:e.width-i-r.x-t.width,height:e.height-o-r.y-t.height})},t.getContainer=function(){var t=this.options.containment;if(t)return t instanceof HTMLElement?t:"string"==typeof t?document.querySelector(t):this.element.parentNode},t.onPointerMove=function(t,e,n){this.dispatchJQueryEvent("pointerMove",t,[e,n])},t.dragMove=function(t,e,n){var i,r,o,s;this.isEnabled&&(o=n.x,s=n.y,i=(r=this.options.grid)&&r[0],r=r&&r[1],o=c(o,i),s=c(s,r),o=this.containDrag("x",o,i),s=this.containDrag("y",s,r),o="y"==this.options.axis?0:o,s="x"==this.options.axis?0:s,this.position.x=this.startPosition.x+o,this.position.y=this.startPosition.y+s,this.dragPoint.x=o,this.dragPoint.y=s,this.dispatchEvent("dragMove",t,[e,n]))},t.containDrag=function(t,e,n){if(!this.options.containment)return e;var i="x"==t?"width":"height",t=c(-this.relativeStartPosition[t],n,"ceil"),i=c(i=this.containSize[i],n,"floor");return Math.max(t,Math.min(i,e))},t.onPointerUp=function(t,e){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",t,[e])},t.dragEnd=function(t,e){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",t,[e]))},t.animate=function(){var t;this.isDragging&&(this.positionDrag(),t=this,requestAnimationFrame(function(){t.animate()}))},t.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},t.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},t.staticClick=function(t,e){this.dispatchEvent("staticClick",t,[e])},t.setPosition=function(t,e){this.position.x=t,this.position.y=e,this.setLeftTop()},t.enable=function(){this.isEnabled=!0},t.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},t.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},t._init=function(){},i&&i.bridget&&i.bridget("draggabilly",e),e},t.exports?t.exports=n(e,x,k):e.Draggabilly=n(e,e.getSize,e.Unidragger)});function L(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function X(t,e){var n=t.options,i=n.dragOpt,r=n.draggable,n=t.template.$container;r&&(e.draggie=new I(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({handle:".term-header"},i)),t.on("destroy",function(){e.draggie.destroy()}))}var Q=e(function(t){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.default=t.exports,t.exports.__esModule=!0});t(Q);var D=e(function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0});t(D);var E=e(function(i){function r(t,e,n){return D()?i.exports=r=Reflect.construct:i.exports=r=function(t,e,n){var i=[null];i.push.apply(i,e);i=new(Function.bind.apply(t,i));return n&&a(i,n.prototype),i},i.exports.default=i.exports,i.exports.__esModule=!0,r.apply(null,arguments)}i.exports=r,i.exports.default=i.exports,i.exports.__esModule=!0});function B(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(n);return e=i?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),l(this,e)}}t(E);var O=function(t){u(n,t);var e=B(n);function n(t){return P(this,n),(t=e.call(this,t)).name="TermError",t}return n}(t(e(function(e){function i(t){var n="function"==typeof Map?new Map:void 0;return e.exports=i=function(t){if(null===t||!Q(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return E(t,arguments,d(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0,i(t)}e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0}))(Error));function R(t,e){if(!t)throw new O(e);return t}function C(t,e){var n=document.createElement("a");n.style.display="none",n.href=t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function j(i,r,o){var s;return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];clearTimeout(s),s=setTimeout(function(){s=null,i.apply(o,e)},r)}}function F(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})}function S(t){return t.replace(/[&<>'"]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[t]||t})}var G=Object.freeze({__proto__:null,TermError:O,errorHandle:R,clamp:function(t,e,n){return Math.max(Math.min(t,Math.max(e,n)),Math.min(e,n))},download:C,debounce:j,uuid:F,escape:S,unescape:function(t){return t.replace(/&amp;|&lt;|&gt;|&#39;|&quot;/g,function(t){return{"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'}[t]||t})}});var _="input",U="output",A="radio",N="checkbox",T={videoBitsPerSecond:5e6,mimeType:"video/webm"};function M(i){var r=i.template.$textarea,o=0;i.on("enter",function(){o=0}),i.on("render",function(){i.drawer&&!i.drawer.renderEditable&&(o=0)}),i.on("history",function(t){var e,n;e=t,n=i.drawer.cacheEmits,(t=(t=n.filter(function(t,e){return t.type===_&&t.text.trim()&&e!==n.length-1}))[t.length+o+e])&&(o+=e,r.value=t.text,i.drawer.emit({type:_,text:t.text,replace:!0}))})}var W=function(){function W(t){var e,n,i,r,o,s,c,a,u,h,l,d,p,f,g,m,b,y,x,v,w,k,I,L,Q,D,E,B,O,R,C,F,S,G,_,U,A,N,T;P(this,W),this.term=t,this.destroyEvents=[],this.proxy=this.proxy.bind(this),n=this,i=(e=t).template.$textarea,n.proxy(document,["click","contextmenu","dblclick"],function(t){t.composedPath&&-1<t.composedPath().indexOf(e.template.$content)?(e.isFocus=!0,e.emit("focus"),e.emit(t.type,t)):e.isFocus&&(e.isFocus=!1,e.emit("blur"))}),e.on("focus",function(){i.focus()}),e.on("click",function(t){t=n.getLogFromEvent(t).log;t&&t.href&&window.open(t.href)}),e.options.autofocus&&setTimeout(function(){e.template.$content.click()},10),k=this,o=(r=t).template,s=o.$container,c=o.$content,N=o.$resize,a=o.$canvas,u=o.$header,h=o.$footer,l=r.options.pixelRatio,d=!1,m=g=f=p=0,k.proxy(N,"mousedown",function(t){d=!0;var e=s.clientWidth,n=s.clientHeight;g=e,m=n,p=t.pageX,f=t.pageY}),k.proxy(document,"mousemove",function(t){var e;d&&(c.style.visibility="hidden",e=g+t.pageX-p,t=m+t.pageY-f,300<=e&&300<=t&&(s.style.width="".concat(e,"px"),s.style.height="".concat(t,"px")))}),k.proxy(document,"mouseup",function(){var t,e;d&&(d=!1,m=g=f=p=0,c.style.visibility="visible",t=s.clientWidth,e=s.clientHeight,r.emit("resize",{width:t,height:e}))}),r.on("resize",function(t){var e=t.width,t=t.height;s.style.width="".concat(e,"px"),s.style.height="".concat(t,"px"),a.width=e*l,a.height=t*l,r.drawer.init()}),r.on("size",function(t){var e=t.header,n=t.content,t=t.footer;u.style.height="".concat(e,"px"),h.style.height="".concat(t,"px"),c.style.top="".concat(e,"px"),c.style.height="".concat(n,"px")}),X(t,this),N=this,y=(b=t).template.$textarea,N.proxy(y,"input",function(){b.emit("input",y.value.trim())}),N.proxy(y,"paste",function(){b.emit("input",y.value)}),b.on("cursor",function(t){var e=t.left,t=t.top;y.style.top="".concat(t,"px"),y.style.left="".concat(e,"px")}),k=this,(x=t).options.recorder&&(v=x.template.$recorder,k.proxy(v,"click",function(){x.recorder.recording?x.recorder.end():x.recorder.start()}),x.on("start",function(){v.classList.remove("creating"),v.classList.add("recording")}),x.on("creating",function(){v.classList.remove("recording"),v.classList.add("creating")}),x.on("end",function(){v.classList.remove("recording"),v.classList.remove("creating")})),N=this,k=(w=t).template,I=k.$content,L=k.$scrollbar,Q=!1,N.proxy(I,"scroll",function(){Q?w.drawer.renderByTop(I.scrollTop):Q=!0}),w.on("scrollTop",function(t){Q?Q=!1:I.scrollTop=t}),w.on("scrollHeight",function(t){L.style.height="".concat(t,"px")}),E=this,B=(D=t).template.$copy,O=[],R=0,D.on("click",function(){var t,e,n,i,r,o,s;D.drawer.render(!1),R&&O.length&&Date.now()-R<=300?(t=(o=D.drawer).fontSize,e=o.ctx,n=o.contentWidth,i=o.contentPadding,r=(s=D.options).background,o=s.color,s=O.reduce(function(t,e){return t+e.text},""),e.fillStyle=o,e.fillRect(i[3],O[0].top,n,t),e.fillStyle=r,e.fillText(s,i[3],O[0].top),B.value=s,B.focus(),B.select()):(O=[],R=0,B.value="")}),D.on("dblclick",function(t){D.drawer.render(!1);var e,n,i=E.getLogFromEvent(t),r=i.line,o=i.log;O=[],R=0,B.value="",o&&(e=(n=D.drawer).ctx,t=n.fontSize,n=(i=D.options).background,i=i.color,O=r,R=Date.now(),e.fillStyle=i,e.fillRect(o.left,o.top,o.width,t),e.fillStyle=n,e.fillText(o.text,o.left,o.top),B.value=o.text,B.focus(),B.select())}),D.on("blur",function(){D.drawer.render(!1),O=[],R=0,B.value=""}),F=this,N=(C=t).template,S=N.$container,G=N.$header,_=!1,U=j(function(){var t=document.body.getBoundingClientRect(),e=t.width,t=t.height;C.emit("resize",{width:e,height:t})},100),C.on("fullscreen",function(t){(_=t)?(U(),S.classList.add("is-fullscreen"),F.draggie&&F.draggie.disable()):(S.classList.remove("is-fullscreen"),C.emit("resize",{width:C.options.width,height:C.options.height}),F.draggie&&F.draggie.enable())}),F.proxy(G,"dblclick",function(t){t.target===G&&C.emit("fullscreen",!_)}),F.proxy(window,"resize",function(){_&&U()}),M(t),N=this,T=(A=t).template.$textarea,N.proxy(T,"keydown",function(t){A.emit("keydown",t);var e=t.keyCode;13===e&&(A.emit("enter",T.value),T.value=""),t.ctrlKey&&67===e&&(T.value="",A.input(),A.emit("abort")),[37,38,39,40].includes(e)&&t.preventDefault(),A.drawer.renderEditable&&(38===e&&A.emit("history",-1),40===e&&A.emit("history",1))})}return s(W,[{key:"getLogFromEvent",value:function(t){var e=this.term.template.$content,n=this.term.options.pixelRatio,e=e.getBoundingClientRect(),i=(t.pageX-e.left)*n,t=(t.pageY-e.top)*n,e=this.term.drawer,n=e.renderLines,e=e.lineHeight,t=n[Math.floor(t/e)]||[],e=t.find(function(t){return i>t.left&&t.left+t.width>=i});return{line:t,log:e}}},{key:"proxy",value:function(e,t,n){var i=this,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};Array.isArray(t)?t.forEach(function(t){return i.proxy(e,t,n,r)}):(e.addEventListener(t,n,r),this.destroyEvents.push(function(){e.removeEventListener(t,n,r)}))}},{key:"destroy",value:function(){this.destroyEvents.forEach(function(t){return t()})}}]),W}(),V=function(){function c(t){var e=this;P(this,c);var n=(this.term=t).options,i=n.container,r=n.pixelRatio,o=n.width,s=n.height,n=n.recorder;this.$container=i,"string"==typeof t.options.container&&(this.$container=document.querySelector(t.options.container)),R(t.constructor.instances.every(function(t){return t.template.$container!==e.$container}),"Cannot mount multiple instances on the same dom element, please destroy the previous instance first."),this.$container.classList.add("term-container"),this.$container.style.width="".concat(o,"px"),this.$container.style.height="".concat(s,"px"),this.$canvas=document.createElement("canvas"),this.$canvas.classList.add("term-canvas"),this.$canvas.width=o*r,this.$canvas.height=s*r,this.$container.appendChild(this.$canvas),this.$textarea=document.createElement("textarea"),this.$textarea.classList.add("term-textarea"),this.$container.appendChild(this.$textarea),this.$copy=document.createElement("textarea"),this.$copy.classList.add("term-copy"),this.$container.appendChild(this.$copy),this.$header=document.createElement("div"),this.$header.classList.add("term-header"),this.$container.appendChild(this.$header),this.$content=document.createElement("div"),this.$content.classList.add("term-content"),this.$container.appendChild(this.$content),this.$scrollbar=document.createElement("div"),this.$scrollbar.classList.add("term-scrollbar"),this.$scrollbar.style.height="0",this.$content.appendChild(this.$scrollbar),this.$footer=document.createElement("div"),this.$footer.classList.add("term-footer"),this.$container.appendChild(this.$footer),this.$resize=document.createElement("div"),this.$resize.classList.add("term-resize"),this.$footer.appendChild(this.$resize),n&&(this.$recorder=document.createElement("div"),this.$recorder.classList.add("term-recorder"),this.$header.appendChild(this.$recorder))}return s(c,[{key:"destroy",value:function(){this.$container.classList.remove("term-container"),this.$container.innerHTML=""}}]),c}(),Z=e(function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},t.exports.default=t.exports,t.exports.__esModule=!0});t(Z);var H=e(function(t){t.exports=function(t){if(Array.isArray(t))return Z(t)},t.exports.default=t.exports,t.exports.__esModule=!0});t(H);var $=e(function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0});t($);var z=e(function(t){t.exports=function(t,e){if(t){if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0});t(z);var Y=e(function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0});t(Y);var J=t(e(function(t){t.exports=function(t){return H(t)||$(t)||z(t)||Y()},t.exports.default=t.exports,t.exports.__esModule=!0})),K=e(function(t,e){t.exports=function(){var t=document.createElement("canvas");t.style.position="fixed",t.style.left="-999px",t.style.top="-999px",t.width=100,t.height=100,document.body.appendChild(t);var e=t.getContext("2d");e.textBaseline="top",e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,100,100),e.fillStyle="rgb(255, 255, 255)",e.fillText("T",0,10);for(var o={},n=1;n<=100;n++){e.fillStyle="rgb(0, 0, 0)";e.fillRect(0,0,100,100);e.fillStyle="rgb(255, 255, 255)";e.font=n+"px Arial";e.fillText("T",0,10);var i=5*n/10;for(var r=0;r<20;r++){var s=e.getImageData(i,r,1,1).data;if(s[0]!==0&&s[1]!==0&&s[2]!==0){o[n]=r-10;break}}}return document.body.removeChild(t),function(i){if(typeof i!=="object")return i;var t=Object.getPrototypeOf(i);var r=t.fillText;if(typeof r!=="function")return i;i.fillText=function(){var t=arguments[2];if(typeof t==="number"){var e=i.font.match(/(\d+)(?:\.\d?)?px/i);if(e&&e[1]){var n=o[e[1]];if(n)arguments[2]=t-n}}return r.apply(this,arguments)};return i}}()});function q(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function et(t,e){var s={bools:{},strings:{},unknownFn:null};"function"==typeof(e=e||{}).unknown&&(s.unknownFn=e.unknown),"boolean"==typeof e.boolean&&e.boolean?s.allBools=!0:[].concat(e.boolean).filter(Boolean).forEach(function(t){s.bools[t]=!0});var c={};Object.keys(e.alias||{}).forEach(function(t){c[t]=[].concat(e.alias[t]),c[t].forEach(function(e){c[e]=[t].concat(c[t].filter(function(t){return e!==t}))})}),[].concat(e.string).filter(Boolean).forEach(function(t){s.strings[t]=!0,c[t]&&(s.strings[c[t]]=!0)});var r=e.default||{},a={_:[]};Object.keys(s.bools).forEach(function(t){i(t,void 0!==r[t]&&r[t])});var n=[];function i(t,e,n){var i,r,o;n&&s.unknownFn&&(i=t,r=n,!(s.allBools&&/^--[^=]+$/.test(r)||s.strings[i]||s.bools[i]||c[i]))&&!1===s.unknownFn(n)||(o=!s.strings[t]&&it(e)?Number(e):e,u(a,t.split("."),o),(c[t]||[]).forEach(function(t){u(a,t.split("."),o)}))}function u(t,e,n){for(var i,r=t,o=0;o<e.length-1;o++){if("__proto__"===(i=e[o]))return;void 0===r[i]&&(r[i]={}),r[i]!==Object.prototype&&r[i]!==Number.prototype&&r[i]!==String.prototype||(r[i]={}),r[i]===Array.prototype&&(r[i]=[]),r=r[i]}"__proto__"!==(i=e[e.length-1])&&(void 0===(r=(r=r===Object.prototype||r===Number.prototype||r===String.prototype?{}:r)===Array.prototype?[]:r)[i]||s.bools[i]||"boolean"==typeof r[i]?r[i]=n:Array.isArray(r[i])?r[i].push(n):r[i]=[r[i],n])}function o(t){return c[t].some(function(t){return s.bools[t]})}-1!==t.indexOf("--")&&(n=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var h=0;h<t.length;h++){var l=t[h];if(/^--.+=/.test(l)){var d=l.match(/^--([^=]+)=([\s\S]*)$/),p=d[1],d=d[2];i(p,d=s.bools[p]?"false"!==d:d,l)}else if(/^--no-.+/.test(l))i(p=l.match(/^--no-(.+)/)[1],!1,l);else if(/^--.+/.test(l)){p=l.match(/^--(.+)/)[1];void 0===(f=t[h+1])||/^-/.test(f)||s.bools[p]||s.allBools||c[p]&&o(p)?/^(true|false)$/.test(f)?(i(p,"true"===f,l),h++):i(p,!s.strings[p]||"",l):(i(p,f,l),h++)}else if(/^-[^-]+/.test(l)){for(var f,g=l.slice(1,-1).split(""),m=!1,b=0;b<g.length;b++)if("-"!==(f=l.slice(b+2))){if(/[A-Za-z]/.test(g[b])&&/=/.test(f)){i(g[b],f.split("=")[1],l),m=!0;break}if(/[A-Za-z]/.test(g[b])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(f)){i(g[b],f,l),m=!0;break}if(g[b+1]&&g[b+1].match(/\W/)){i(g[b],l.slice(b+2),l),m=!0;break}i(g[b],!s.strings[g[b]]||"",l)}else i(g[b],f,l);p=l.slice(-1)[0];m||"-"===p||(!t[h+1]||/^(-|--)[^-]/.test(t[h+1])||s.bools[p]||c[p]&&o(p)?t[h+1]&&/^(true|false)$/.test(t[h+1])?(i(p,"true"===t[h+1],l),h++):i(p,!s.strings[p]||"",l):(i(p,t[h+1],l),h++))}else if(s.unknownFn&&!1===s.unknownFn(l)||a._.push(s.strings._||!it(l)?l:Number(l)),e.stopEarly){a._.push.apply(a._,t.slice(h+1));break}}return Object.keys(r).forEach(function(e){var t,n,i;t=a,n=e.split("."),i=t,n.slice(0,-1).forEach(function(t){i=i[t]||{}}),n[n.length-1]in i||(u(a,e.split("."),r[e]),(c[e]||[]).forEach(function(t){u(a,t.split("."),r[e])}))}),e["--"]?(a["--"]=new Array,n.forEach(function(t){a["--"].push(t)})):n.forEach(function(t){a._.push(t)}),a}var nt=function(){function r(n){P(this,r);var t=(this.term=n).options,e=t.pixelRatio,i=t.fontSize,t=this.term.template.$canvas;this.scrollTop=0,this.scrollHeight=0,this.lineGap=10*e,this.fontSize=i*e,this.lineHeight=this.lineGap+this.fontSize,this.controlSize=6*e,this.controlColor=["#FF5F56","#FFBD2E","#27C93F"],this.renderIndex=-1,this.$watermark=null,this.$tmp=document.createElement("div"),this.ctx=K(t.getContext("2d")),this.contentPadding=[45,15,15,15].map(function(t){return t*e}),this.cacheEmits=[],this.cacheLines=[],this.renderLines=[],this.emit=this.emit.bind(this),this.clear=this.clear.bind(this),this.init(),this.cursor=!1,function t(){var e=this;setTimeout(function(){n.isDestroy||(e.cursor=!e.cursor,e.renderCursor(),t.call(e))},500)}.call(this)}return s(r,[{key:"init",value:function(){var t=this.term,e=t.template.$canvas,n=t.options,t=n.pixelRatio,n=n.fontFamily;this.canvasHeight=e.height,this.canvasWidth=e.width,this.contentHeight=this.canvasHeight-this.contentPadding[0]-this.contentPadding[2],this.contentWidth=this.canvasWidth-this.contentPadding[3]-this.contentPadding[1]/2,this.maxLength=Math.floor(this.contentHeight/this.lineHeight),this.ctx.textBaseline="top",this.ctx.font="".concat(this.fontSize,"px ").concat(n),this.term.emit("size",{header:this.contentPadding[0]/t,content:this.contentHeight/t,footer:this.contentPadding[2]/t}),this.loadWatermark(),this.render()}},{key:"lastCacheLog",get:function(){var t=this.cacheLines[this.cacheLines.length-1];return t&&t[t.length-1]}},{key:"lastRenderLog",get:function(){var t=this.renderLines[this.renderLines.length-1];return t&&t[t.length-1]}},{key:"cacheEditable",get:function(){return this.term.isFocus&&this.lastCacheLog&&this.lastCacheLog.type===_}},{key:"renderEditable",get:function(){return this.cacheEditable&&this.lastCacheLog===this.lastRenderLog}},{key:"cursorPos",get:function(){if(this.renderEditable){var t=this.term.options.pixelRatio;return{left:this.lastRenderLog.left+this.lastRenderLog.width+2*t,top:this.contentPadding[0]+this.lineHeight*(this.renderLines.length-1)}}return{left:0,top:0}}},{key:"render",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.term.isDestroy||(this.renderBackground(),this.renderTopbar(),this.renderContent(),t&&this.autoScroll(),this.term.emit("render")),this}},{key:"renderBackground",value:function(){var t,e,n=this.term.options,i=n.background,r=n.pixelRatio,o=n.debug;this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.$watermark&&(t=(e=this.$watermark).width/r,n=e.height/r,i=this.canvasWidth-t,e=this.canvasHeight-n,this.ctx.drawImage(this.$watermark,i,e,t,n)),o&&(this.ctx.fillStyle="green",this.ctx.fillRect(0,this.contentPadding[0],this.canvasWidth,r),this.ctx.fillRect(0,this.contentPadding[0]+this.contentHeight,this.canvasWidth,r),this.ctx.fillRect(this.contentPadding[3],0,r,this.canvasHeight),this.ctx.fillRect(this.contentPadding[3]+this.contentWidth,0,r,this.canvasHeight))}},{key:"loadWatermark",value:function(){var t,e=this,n=this.term.options.watermark;n&&(this.$watermark&&this.$watermark.src===n||((t=new Image).onload=function(){e.$watermark=t,e.render(!1)},t.src=n))}},{key:"renderTopbar",value:function(){var i=this,t=this.term.options,e=t.title,n=t.color,t=t.pixelRatio;this.ctx.fillStyle=n;n=this.ctx.measureText(e).width;this.ctx.fillText(e,this.canvasWidth/2-n/2,this.contentPadding[1]-t/3),this.controlColor.forEach(function(t,e){i.ctx.beginPath();var n=i.contentPadding[3]+e*i.controlSize*3.6+i.controlSize,e=i.contentPadding[1]+i.controlSize;i.ctx.arc(n,e,i.controlSize,0,360,!1),i.ctx.fillStyle=t,i.ctx.fill(),i.ctx.closePath()})}},{key:"renderContent",value:function(){var t,e=this.term.options,n=e.pixelRatio,i=e.color,r=e.debug;if(this.renderLines.length)for(var o=0;o<this.renderLines.length;o+=1){var s=this.renderLines[o];if(s&&s.length)for(var c=0;c<s.length;c+=1){var a=s[c],u=this.contentPadding[0]+this.lineHeight*o;r&&(this.ctx.fillStyle="red",this.ctx.fillRect(0,u,this.canvasWidth,n),this.ctx.fillRect(0,u+this.fontSize,this.canvasWidth,n)),a.top=u,a.background&&(this.ctx.fillStyle=a.background,this.ctx.fillRect(a.left,u,a.width,this.fontSize)),this.ctx.fillStyle=a.color||i,this.ctx.fillText(a.text,a.left,u),(a.href||a.underline)&&this.ctx.fillRect(a.left,u+this.fontSize,a.width,n),a.del&&this.ctx.fillRect(a.left,u+Math.ceil(this.fontSize/2),a.width,n),a.border&&(this.ctx.fillRect(a.left,u,a.width,n),this.ctx.fillRect(a.left,u+this.fontSize-n,a.width,n),this.ctx.fillRect(a.left,u,n,this.fontSize),this.ctx.fillRect(a.left+a.width-n,u,n,this.fontSize))}}this.renderEditable&&(e=(t=this.cursorPos).left,t=t.top,this.term.emit("cursor",{left:e/n,top:t/n})),this.scrollHeight=this.cacheLines.length*this.lineHeight/n,this.term.emit("scrollHeight",this.scrollHeight)}},{key:"autoScroll",value:function(){var t=this.term.options.pixelRatio,e=this.renderLines[this.renderLines.length-1],e=this.cacheLines.indexOf(e);this.scrollTop=((e+1)*this.lineHeight-this.contentHeight)/t,this.term.emit("scrollTop",this.scrollTop)}},{key:"renderByIndex",value:function(t){this.renderIndex!==t&&(this.renderIndex=t,this.renderLines=this.cacheLines.slice(t,t+this.maxLength),this.render(!1))}},{key:"renderByTop",value:function(t){var e=this.term.options.pixelRatio,e=Math.ceil(t*e/this.lineHeight);this.renderByIndex(e)}},{key:"renderCursor",value:function(){var t=this.term.options,e=t.background,n=t.color,i=t.pixelRatio,r=this.cursorPos,t=r.left,r=r.top;this.renderEditable&&t&&r&&(this.ctx.fillStyle=this.cursor?n:e,this.ctx.fillRect(t,r,5*i,this.fontSize))}},{key:"emit",value:function(t){var e;b(t,{type:function(t){return!![_,U].includes(t)||'The type must be "'.concat(_,'" or "').concat(U,'"')},text:"string",prefix:"undefined|string",replace:"undefined|boolean"}),t.replace&&(this.cacheEmits.pop(),(e=this.cacheLines[this.cacheLines.length-1])&&e.groupId&&(this.cacheLines=this.cacheLines.filter(function(t){return t.groupId!==e.groupId}))),this.cacheEmits.push(tt({},t));var n=this.parse(t);(t=this.cacheLines).push.apply(t,J(n)),this.renderLines=this.cacheLines.slice(-this.maxLength),this.render()}},{key:"parse",value:function(t){var e=this.term.options.prefix;t.type===_&&(t.text=(t.prefix||e)+S(t.text));for(var n=F(),i=[],r=t.text.split(/\r?\n/),o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=0,c=this.contentPadding[3],a=0;a<r.length;a+=1){var u=r[a];this.$tmp.innerHTML=u.replace(o,"");for(var h=0;h<this.$tmp.childNodes.length;h+=1){var l=this.$tmp.childNodes[h],d=l.textContent,p=this.ctx.measureText(d).width,f={};l.tagName&&(f.color=l.getAttribute("color"),f.background=l.getAttribute("background"),f.href=l.getAttribute("href"),f.border=l.hasAttribute("border"),f.underline=l.hasAttribute("underline"),f.del=l.hasAttribute("del"));var g=c+p;if(g>this.contentWidth){for(var m="",b=!1,y=c,x=J(d),v=0;v<x.length;v+=1)var w=x[v],k=this.ctx.measureText(w).width,I=c+k,c=I<=this.contentWidth?(m+=w,I):(I=tt(tt(tt({},t),f),{},{width:this.ctx.measureText(m).width,left:b?this.contentPadding[3]:y,text:m}),i[s]?i[s].push(I):(i[s]=[I],i[s].groupId=n),s+=1,m=w,b=!0,this.contentPadding[3]+k);l=tt(tt(tt({},t),f),{},{width:this.ctx.measureText(m).width,left:b?this.contentPadding[3]:y,text:m});i[s]?i[s].push(l):(i[s]=[l],i[s].groupId=n)}else{d=tt(tt(tt({},t),f),{},{width:p,left:c,text:d});i[s]?i[s].push(d):(i[s]=[d],i[s].groupId=n),c=g}}s+=1,c=this.contentPadding[3]}return i.filter(Boolean)}},{key:"clear",value:function(){this.cacheEmits=[],this.cacheLines=[],this.renderLines=[],this.render()}}]),r}();function it(t){return"number"==typeof t||(/^0x[0-9a-f]+$/i.test(t)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t))}var rt=function(){function r(t){var e=this;P(this,r);var n=(this.term=t).drawer,i=t.options.welcome;this.isTyping=!1,this.typeTimer=null,this.askResolve=null,this.type=this.type.bind(this),this.input=this.input.bind(this),this.output=this.output.bind(this),this.ask=function(t){return R(!e.isQuestion,"The last problem has not been solved"),e.question(t)},this.output(i).input(),t.on("input",function(t){n.cacheEditable&&(e.isQuestion?e.question(n.lastCacheLog.prefix,t):e.input(t,!0))}),t.on("enter",function(t){n.cacheEditable&&t.trim()&&(e.isQuestion?(e.askResolve(t),e.askResolve=null):e.execute(t))}),t.on("abort",function(){e.stopType()})}return s(r,[{key:"isQuestion",get:function(){var t=this.term.drawer,e=t.lastCacheLog;return t.cacheEditable&&e.prefix&&"function"==typeof this.askResolve}},{key:"execute",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(!t.trim())return this.input();var n=this.term.options,i=n.parseOpt,r=n.notFound,o=n.loading,n=this.findAction(t),i=et(t.split(" "),i);if(!n){r=r.call(this.term,t,i);return this.output(r).input()}if("function"!=typeof n.output)return this.output(n.output).input();try{var s=n.output.call(this.term,t,i);if("promise"!==b.kindOf(s))return void 0!==s?this.output(s).input():this;var c=o.call(this.term,t,i);return this.output(c),s.then(function(t){return void 0!==t?e.output(t,!0).input():e}).catch(function(t){t=("error"===b.kindOf(t)?"":"Error: ").concat(String(t)),t='<d color="red">'.concat(t,"</d>");return e.output(t,!0).input()})}catch(t){s='<d color="red">'.concat(String(t),"</d>");return this.output(s).input()}}},{key:"findAction",value:function(n){return n=n.trim().toLowerCase(),this.term.options.actions.find(function(t){var e=b.kindOf(t.input);return"string"===e?n===t.input:"regexp"===e?t.input.test(n):null})}},{key:"output",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this.term.drawer.emit({type:U,replace:1<arguments.length&&void 0!==arguments[1]&&arguments[1],text:String(t)}),this}},{key:"input",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this.term.drawer.emit({type:_,replace:1<arguments.length&&void 0!==arguments[1]&&arguments[1],text:String(t)}),this}},{key:"question",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return this.isQuestion?this.term.drawer.emit({type:_,replace:!0,prefix:n,text:i}):new Promise(function(t){e.askResolve=t,e.term.drawer.emit({type:_,replace:!1,prefix:n,text:i})})}},{key:"type",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",s=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this.isTyping)return Promise.reject();var c=this.term.template.$textarea;return new Promise(function(i){var r=J(e),o="";!function t(){var e,n=this;r.length?(this.isTyping=!0,e=r.shift(),o+=e,this.input(o,!0),this.typeTimer=setTimeout(function(){n.term.isDestroy||t.call(n)},100)):(this.isTyping=!1,c.value=o,s&&(this.execute(o),c.value=""),i(o))}.call(t)})}},{key:"stopType",value:function(){clearTimeout(this.typeTimer)}}]),r}(),ot=function(){function e(t){P(this,e),this.term=t,this.blobs=[]}return s(e,[{key:"recording",get:function(){return this.recorder&&"recording"===this.recorder.state}},{key:"size",get:function(){return this.blobs.reduce(function(t,e){return t+e.size},0)}},{key:"duration",get:function(){return this.blobs.length}},{key:"start",value:function(){var e=this;R(!this.recording,"The recorder is recording...");var t=this.term.template.$canvas;this.stream=t.captureStream(30),R(this.stream,"Cannot get MediaStream of canvas"),R(MediaRecorder&&MediaRecorder.isTypeSupported(T.mimeType),"Does not support recording webm video"),this.recorder=new MediaRecorder(this.stream,T),this.recorder.ondataavailable=function(t){e.recording&&t.data&&0<t.data.size&&(e.blobs.push(t.data),e.term.emit("recording",{size:e.size,duration:e.duration}))},this.recorder.onstart=function(){e.term.emit("start")},this.recorder.onstop=function(){var t=URL.createObjectURL(new Blob(e.blobs));C(t,"".concat(Date.now(),".webm")),URL.revokeObjectURL(t),e.blobs=[],e.term.emit("end")},this.recorder.start(1e3)}},{key:"end",value:function(){this.term.emit("creating"),this.recorder.stop()}}]),e}(),st=function(){function t(n){var i=this;P(this,t),this.term=n,this.color="#66d9ef",this.radioTip="(select: Up or Down, confirm: Enter)",this.checkboxTip="(move: Up or Down, select: Space, confirm: Enter)",this.radioInit=!1,this.radioList=[],this.radioKey=null,this.radioResolve=function(){return null},this.checkboxInit=!1,this.checkboxList=[],this.checkboxIndex=0,this.checkboxKey=[],this.checkboxResolve=function(){return null},this.radio=function(t){return i.render(t,A)},this.checkbox=function(t){return i.render(t,N)},n.on("keydown",function(t){var e=n.drawer.lastCacheLog;e.style===A&&i.radioList===e.list&&i.radioEvent(t),e.style===N&&i.checkboxList===e.list&&i.checkboxEvent(t)})}return s(t,[{key:"render",value:function(e,n){var i=this;return new Promise(function(t){b(e,[{key:"string|number",text:"string|number"}]),R(e.length,"".concat(n," array cannot be empty")),R(e.map(function(t){return t.key}).every(function(t,e,n){return n.indexOf(t)===n.lastIndexOf(t)}),"The key value in the array element must be unique"),n===A&&(i.radioList=e,i.radioKey=e[0].key,i.radioResolve=t,i.radioRender(e,i.radioKey),i.radioInit=!0),n===N&&(i.checkboxList=e,i.checkboxIndex=0,i.checkboxKey=[],i.checkboxResolve=t,i.checkboxRender(),i.checkboxInit=!0)})}},{key:"radioRender",value:function(){var e=this,t=this.radioList.map(function(t){return e.radioKey===t.key?"<d color='".concat(e.color,"'>=> ").concat(t.text,"</d>"):"   ".concat(t.text)}).join("\n");this.term.drawer.emit({text:"".concat(t,"\n").concat(this.radioTip),list:this.radioList,type:U,style:A,replace:this.radioInit})}},{key:"radioEvent",value:function(t){var e=this,n=t.keyCode,i=this.radioList.findIndex(function(t){return t.key===e.radioKey});38===n&&(t.preventDefault(),this.radioKey=(i<=0?this.radioList[this.radioList.length-1]:this.radioList[i-1]).key,this.radioRender()),40===n&&(t.preventDefault(),i===this.radioList.length-1?this.radioKey=this.radioList[0].key:this.radioKey=this.radioList[i+1].key,this.radioRender()),13===n&&(this.radioResolve(this.radioKey),this.radioInit=!1,this.radioList=[],this.radioKey=null,this.radioResolve=function(){return null})}},{key:"checkboxRender",value:function(){var n=this,t=this.checkboxList.map(function(t,e){return e===n.checkboxIndex?"<d color='".concat(n.color,"'>").concat(n.checkboxKey.includes(t.key)?"":""," ").concat(t.text,"</d>"):"".concat(n.checkboxKey.includes(t.key)?"":""," ").concat(t.text)}).join("\n");this.term.drawer.emit({text:"".concat(t,"\n").concat(this.checkboxTip),list:this.checkboxList,type:U,style:N,replace:this.checkboxInit})}},{key:"checkboxEvent",value:function(t){var e,n=t.keyCode;38===n&&(t.preventDefault(),this.checkboxIndex<=0?this.checkboxIndex=this.checkboxList.length-1:--this.checkboxIndex,this.radioKey=this.checkboxList[this.checkboxIndex].key,this.checkboxRender()),40===n&&(t.preventDefault(),this.checkboxIndex===this.checkboxList.length-1?this.checkboxIndex=0:this.checkboxIndex+=1,this.checkboxRender()),32===n&&(e=this.checkboxList[this.checkboxIndex].key,-1<(t=this.checkboxKey.indexOf(e))?this.checkboxKey.splice(t,1):this.checkboxKey.push(e),this.checkboxRender()),13===n&&(this.checkboxResolve(this.checkboxKey),this.checkboxInit=!1,this.checkboxList=[],this.checkboxIndex=0,this.checkboxKey=[],this.checkboxResolve=function(){return null})}}]),t}();function ct(t,e){var r="-",o="|",s=" ";return t.output(function n(t,e){var i=1<arguments.length&&void 0!==e?e:0;return t.map(function(t){var e=t.child&&t.child.length;return(i?o:"")+"".concat(s.repeat(i?4*i-1:0)).concat(o+r.repeat(2)," ").concat(t.value)+(e?"\n".concat(n(t.child,i+1)):"")}).join("\n")}(e))}function at(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ht(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(n);return e=i?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),l(this,e)}}var lt=0,dt=[];return function(){u(i,y);var n=ht(i);function i(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return P(this,i),(e=n.call(this)).options=b(ut(ut({},i.default),t),i.scheme),e.isDestroy=!1,e.isFocus=!1,e.template=new V(c(e)),e.events=new W(c(e)),e.drawer=new nt(c(e)),e.commander=new rt(c(e)),e.inquirer=new st(c(e)),e.recorder=new ot(c(e)),e.ask=e.commander.ask,e.type=e.commander.type,e.input=e.commander.input,e.output=e.commander.output,e.clear=e.drawer.clear,e.radio=e.inquirer.radio,e.checkbox=e.inquirer.checkbox,e.tree=function(t){return ct(c(e),t)},lt+=1,e.id=lt,dt.push(c(e)),e}return s(i,[{key:"color",get:function(){return this.options.color},set:function(t){this.options.color=t,this.drawer.init()}},{key:"background",get:function(){return this.options.background},set:function(t){this.options.background=t,this.drawer.init()}},{key:"watermark",get:function(){return this.options.watermark},set:function(t){this.options.watermark=t,this.drawer.init()}},{key:"width",get:function(){return this.template.$container.clientWidth},set:function(t){this.emit("resize",{width:t,height:this.height})}},{key:"height",get:function(){return this.template.$container.clientHeight},set:function(t){this.emit("resize",{width:this.width,height:t})}},{key:"debug",get:function(){return this.options.debug},set:function(t){this.options.debug=t,this.drawer.init()}},{key:"destroy",value:function(){dt.splice(dt.indexOf(this),1),this.events.destroy(),this.template.destroy(),this.isDestroy=!0,this.emit("destroy")}}],[{key:"instances",get:function(){return dt}},{key:"version",get:function(){return"1.1.10"}},{key:"utils",get:function(){return G}},{key:"font",value:function(n,i){return new Promise(function(e,t){return window.FontFace?new FontFace(n,"url(".concat(i,")")).load().then(function(t){document.fonts.add(t),e(t)}):t(new Error("FontFace constructor is not supported"))})}},{key:"default",get:function(){return{container:"#term",debug:!1,width:600,height:500,actions:[],parseOpt:{},recorder:!0,draggable:!0,dragOpt:{},fontSize:13,watermark:"",autofocus:!1,fontFamily:"monospace",color:"#b0b2b6",title:"Term Web",prefix:'root@linux: ~ <d color="#00f501">$</d> ',welcome:"Last login: ".concat(new Date),loading:function(){return'<d color="yellow">Loading...</d>'},background:"rgb(42, 39, 52)",pixelRatio:window.devicePixelRatio,notFound:function(t){return"-bash: <d color='red'>".concat(t,"</d>: command not found")}}}},{key:"scheme",get:function(){return{container:"string|htmldivelement",debug:"boolean",width:"number",height:"number",actions:[{input:"string|regexp",output:"string|function"}],parseOpt:"object",recorder:"boolean",draggable:"boolean",dragOpt:"object",fontSize:"number",watermark:"string",autofocus:"boolean",fontFamily:"string",color:"string",title:"string",prefix:"string",welcome:"string",loading:"function",background:"string",pixelRatio:"number",notFound:"function"}}}]),i}()});
